{% include "store/base.html" %}

{% load static %}

{% load crispy_forms_tags %}

{% block content %}

<br>
<div class="container d-flex justify-content-center align-items-center min-vh-100" style="font-size: 14px;">
    <div class="w-100" style="max-width: 350px;">
        <div class="card p-4">
            <a class="navbar-brand main-heading text-center" href="{% url 'store' %}">

                &nbsp; &nbsp; <img src="{% static 'media/images/logo.png' %}" alt="Logo">

            </a>

            <h4 class="card-title text-center mb-4">Welcome to FoodMart</h4>

            <form method="POST" autocomplete="off">
                {% csrf_token %}

                <div class="mb-3" style="font-size: 14px;">
                    {{ form.username | as_crispy_field }}
                </div>

                <div class="mb-2" style="font-size: 14px;">
                    <div class="position-relative ">

                        {{ form.password | as_crispy_field }}
                        <span id="togglePassword" class="position-absolute"
                            style="top: 70%; right: 10px; transform: translateY(-50%); cursor: pointer;">
                            <i class="bi bi-eye-slash" id="toggleIcon"></i>
                        </span>
                    </div>
                </div>
                <div class="text-end mb-2" style="font-size: 14px;">

                    <a href="{% url 'reset_password' %}">Forgot password?</a>
                </div>
                <div class="mb-3">
                    {% if form.non_field_errors %}
                    <div style="font-size: 12px; color:rgb(220, 53, 69); ">
                        <strong>{{ form.non_field_errors }}</strong>
                    </div>
                    {% endif %}
                </div>
                <div class="mb-3">
                    <button type="submit" class="btn btn-primary w-100" style="font-size: 14px;"> &nbsp;
                        Login</button>
                </div>

               

                <div class="text-center" style="font-size: 14px;">Don't have an account?
                    <a href="{% url 'register' %}">Sign Up</a>
                </div>
            </form>
        </div>
    </div>
</div>
</div>
<br><br>
<script>
    // JavaScript to toggle password visibility
    document.getElementById("togglePassword").addEventListener("click", function () {
        const passwordField = document.querySelector("input[name='password']");
        const toggleIcon = document.getElementById("toggleIcon");

        if (passwordField.type === "password") {
            passwordField.type = "text";
            toggleIcon.classList.remove("bi-eye-slash");
            toggleIcon.classList.add("bi-eye");
        } else {
            passwordField.type = "password";
            toggleIcon.classList.remove("bi-eye");
            toggleIcon.classList.add("bi-eye-slash");
        }
    });
</script>
{% endblock %}